# è¤‡åˆå‹æ…‹
## Array

å®£å‘Š

```go
// æŒ‡å®šé™£åˆ—å¤§å°èˆ‡å…ƒç´ å‹æ…‹
var x [3]int
```

æ²’æœ‰æŒ‡å®šå€¼æ™‚ï¼Œæœƒè¢«è¨­å®šè©²å‹æ…‹çš„é è¨­å€¼

é™£åˆ—å¸¸å€¼å®£å‘Šï¼Œå…¶å¯ä»¥çœç•¥å…ƒç´ æ•¸é‡ï¼Œå¯ä»¥ä½¿ç”¨ `...` å³ `[...]{1,2,3}`
```go
var x = [3]int{1,2,3}
```

ç¨€ç–é™£åˆ—

```go
var x = [12]int{1, 5:4, 6, 10:100, 15}
```

å»ºç«‹ 12 å€‹ int å‹æ…‹å…ƒç´ ï¼Œå€¼æœƒæ˜¯ `[1, 0, 0, 0, 0, 4, 6 ,0, 0, 0, 100, 15]`

ç•¶è¦è®€å–é•·åº¦ï¼Œå¯ä»¥ä½¿ç”¨å…§å»ºå‡½æ•¸ `len`ï¼Œå…¶æ¥æ”¶ä¸€å€‹é™£åˆ—ä¸¦å›å‚³é•·åº¦ã€‚


**é™£åˆ—å¤§å°ç„¡æ³•ç”¨è®Šæ•¸ä¾†æ±ºå®šï¼Œå› ç‚ºå‹æ…‹å¿…é ˆåœ¨ç·¨è­¯æœŸæ±ºå®šï¼Œè€ŒéåŸ·è¡ŒæœŸã€‚**ä¸”ï¼Œä¸èƒ½ä½¿ç”¨å‹æ…‹è½‰æ›å°‡ä¸åŒå¤§å°çš„é™£åˆ—è½‰æ›æˆä¸€æ¨£å¤§å°ã€‚


## Slice

`slice` çš„é•·åº¦éå‹æ…‹ä¸€éƒ¨åˆ†ï¼Œå› æ­¤æ²’æœ‰é™£åˆ—çš„é™åˆ¶ã€‚

å®£å‘Š `slice` æ™‚ç„¡é ˆå®šç¾©å¤§å°

```go
var x = []int{10, 20, 30}
```

ä½¿ç”¨ç´¢å¼•å»ºç«‹å€¼

```go
var x = []int{1, 5:4, 6, 10:100, 15}
```

ä¹Ÿå¯ä»¥å®£å‘Šå¤šç¶­çš„ `slice`ï¼Œ`var x [][]int`

è®€å–å’Œå¯«å…¥å€¼å’Œé™£åˆ—æ˜¯ç›¸åŒçš„

```go
x[0] = 10
fmt.Println(x[2])
```

ä¸ä½¿ç”¨å¸¸å€¼é€²è¡Œå®£å‘Š

```go
var x []int
```

å…¶åˆå§‹å€¼æœƒæ˜¯ `nil`ã€‚å°æ–¼ `slice` è€Œè¨€ä»–æ˜¯ç„¡æ³•é€²è¡Œ `==` æˆ– `!=` æ¯”è¼ƒçš„ï¼Œä½†å…¶å¯ä»¥å’Œ `nil` æ¯”è¼ƒã€‚

å‡½å¼
- len
- append
    - æ“´å¢ slice
- cap
    - ä¿ç•™é€£çºŒç©ºé–“è¨˜æ†¶é«”çš„æ•¸é‡
    - ç•¶ slice é•·åº¦ç­‰æ–¼ cap æ™‚ï¼Œåº•å±¤æœƒé…ç½®æ›´å¤§çš„ slice å®¹é‡
- make


é›–ç„¶ slice å¯ä»¥è‡ªå‹•å¢é•·é•·åº¦ï¼Œä½†æ˜¯æ›´æœ‰æ•ˆç‡çš„æ–¹å¼æ˜¯ä¸€æ¬¡è¨­å®šå¥½å¤§å°ã€‚é‚£è‡³æ–¼å¦‚ä½•è¨­å®šå°±è¦é€é `make` å‡½ç¤ºã€‚

å°æ–¼ slice å¸¸å€¼æˆ–æ˜¯ nil å®£å‘Šä¾†èªªï¼Œä¸èƒ½å»ºç«‹ç‰¹å®šé•·åº¦æˆ–æ˜¯å®¹é‡çš„ sliceã€‚


>Go æ˜¯**ä»¥å€¼å‘¼å«**ï¼Œå› æ­¤å‚³å…¥åƒæ•¸æ™‚ï¼Œæœƒè¢«åº•å±¤è£½ä½œä¸€å€‹å‰¯æœ¬ã€‚

[example](CH3/slice/main.go)
### make

å®£å‘Šé•·åº¦ç‚º 5ï¼Œå®¹é‡ç‚º 5 çš„ int å‹æ…‹ sliceï¼Œä¸”åˆå§‹å€¼éƒ½ç‚º 0ã€‚
```go
x := make([]int, 5)
```

å®šç¾©åˆå§‹å®¹é‡

```go
x := make([]int, 5, 10)
```

å†æœ‰å®£å‘Š `len` æ™‚ï¼Œå†ç”¨ `append` æ–¹å¼é€²è¡Œè³¦å€¼ï¼Œæœƒæ˜¯è©² `len` ä¹‹å¾Œã€‚é™¤éä½¿ç”¨ `len` ç‚º 0ï¼Œä½†å¤§æ–¼ 0 çš„å®¹é‡ã€‚

```go
var z := make([]int, 0, 3)
z = append(z, 10)
log.Printf("value: %v", z) //  [10]
```

[example](CH3/make/main.go)

### åˆ‡å‰² slice

slice é‹ç®—å¼å¯ä»¥ç”¨ slice ä¾†å»ºç«‹ sliceã€‚

```go
    x := []int{1, 2, 3, 4}
	y := x[:2]
	log.Printf("y value: %v", y)
	z := x[1:]
	log.Printf("z value: %v", z)
	d := x[1:3]
	log.Printf("d value: %v", d)
	a := x[:]
	log.Printf("a value: %v", a)
// 2023/06/25 21:26:17 y value: [1 2]
// 2023/06/25 21:26:17 z value: [2 3 4]
// 2023/06/25 21:26:17 d value: [2 3]
// 2023/06/25 21:26:17 a value: [1 2 3 4]
```

### slice å…±ç”¨å„²å­˜
å¾ slice è£¡é¢å–å‡ºçš„ slice ä¸æœƒè£½ä½œè³‡æ–™çš„è¤‡æœ¬ï¼Œ*è€Œæœƒå¾—åˆ°å…©å€‹å…±äº«è¨˜æ†¶é«”çš„è®Šæ•¸*ã€‚å› æ­¤è®Šæ›´æœƒç›¸äº’å½±éŸ¿ã€‚

```go
    x := []int{1, 2, 3, 4}
    x[1] = 20
	y[0] = 10
	z[2] = 30
	log.Printf("x value: %v", x)
	log.Printf("y value: %v", y)
	log.Printf("z value: %v", z)
// 2023/06/25 21:30:09 x value: [10 20 3 30]
// 2023/06/25 21:30:09 y value: [10 20]
// 2023/06/25 21:30:09 z value: [20 3 30]
```

å¦‚æœç¶“é `slice` åˆ‡å‰²å¾Œå†ç”¨ `append` å¢åŠ å…ƒç´ ï¼Œæœƒè®Šå¾—å¾ˆå›°æƒ‘

```go
	x1 := []int{1, 2, 3, 4}
	y1 := x1[:2]
	log.Printf("x1 Cap: %d, y1 Cap: %d", cap(x1), cap(y1))

	y1 = append(y1, 30)
	log.Printf("x1 value: %v", x1)
	log.Printf("y1 value: %v", y1)
// 2023/06/25 21:40:07 x1 Cap: 4, y1 Cap: 4
// 2023/06/25 21:40:07 x1 value: [1 2 30 4]
// 2023/06/25 21:40:07 y1 value: [1 2 30]
```

åœ¨å…±ç”¨å„²å­˜ä¸‹ï¼ŒåŸå§‹ slice æœªä½¿ç”¨çš„*å®¹é‡*ä¹Ÿæœƒèˆ‡å­ slice å…±ç”¨ã€‚ä»¥ç¯„ä¾‹ `y1` slice ä¾†èªªï¼Œè©² slice çš„å®¹é‡æ˜¯åŸå§‹ slice å®¹é‡æ¸›å»å­ slice åœ¨åŸå§‹ slice å…§çš„ä½ç§»ã€‚


```go
	log.Println("----------------------------------------")
	x = make([]int, 0, 5)
	x = append(x, 1, 2, 3, 4)
	y = x[:2]
	z = x[2:]
	log.Printf("x : %d, y: %d, z: %d", cap(x), cap(y), cap(z))
	y = append(y, 30, 40, 50)
	x = append(x, 60)
	z = append(z, 70)
	log.Printf("x value: %v", x)
	log.Printf("y value: %v", y)
	log.Printf("z value: %v", z)
// 2023/07/06 20:30:52 x : 5, y: 5, z: 3
// 2023/07/06 20:30:52 x value: [1 2 30 40 70]
// 2023/07/06 20:30:52 y value: [1 2 30 40 70]
// 2023/07/06 20:30:52 z value: [30 40 70]
```

ä¸Šé¢ç¯„ä¾‹èªªæ˜*çµ•å°ä¸è¦ä½¿ç”¨ append èˆ‡å­ slice*ï¼Œå¦å‰‡ä½¿ç”¨*å®Œæ•´ slice é‹ç®—å¼* ç¢ºä¿ append ä¸æœƒé€ æˆè¦†å¯«ï¼Œå¦‚ä¸‹ç¯„ä¾‹ã€‚

```go
	x1 = make([]int, 0, 5)
	x1 = append(x1, 1, 2, 3, 4)
	y1 = x1[:2:2]
	z1 := x1[2:4:4]
	log.Printf("y1 cap : %d, z1 cap: %d", cap(y1), cap(z1))
	y1 = append(y1, 30, 40, 50)
	z1 = append(z1, 70)
	log.Printf("y1 value: %v", y1)
	log.Printf("z1 value: %v", z1)
// 2023/07/09 14:56:17 y1 cap : 2, z1 cap: 2
// 2023/07/09 14:56:17 y1 value: [1 2 30 40 50]
// 2023/07/09 14:56:17 z1 value: [3 4 70]
```

åŸå› æ˜¯å› ç‚ºå°‡å­ slice å®¹é‡é™åˆ¶ç‚ºå®ƒå€‘çš„é•·åº¦ï¼Œæ‰€ä»¥æ–°å¢é¡å¤–å…ƒç´ æœƒç”¢ç”Ÿæ–°çš„ sliceã€‚

## é™£åˆ—è½‰æˆ slice
åœ¨é™£åˆ—ä¸Šå¯ä»¥ä½¿ç”¨ slice å‡½å¼å–å‡º sliceã€‚åŒæ¨£çš„å–å‡ºçš„ slice ä¹Ÿæœƒåƒé€ å…±ç”¨çš„è¨˜æ†¶é«”ã€‚

```go
	x := [4]int{1, 2, 3, 4}
	y := x[:2]
	z := x[2:]
	log.Printf("x: %v", x)
	log.Printf("y: %v", y)
	log.Printf("z: %v", z)
```

### copy

å¦‚æœè¦å»ºç«‹å’Œä¾†æºç›¸äº’ç¨ç«‹çš„ sliceï¼Œå¯ä»¥ä½¿ç”¨ copy å‡½ç¤º

```go
	x1 := []int{1, 2, 3, 4}
	y1 := make([]int, 4)
	num := copy(y1, x1) // å°‡ x1 è¤‡è£½åˆ° y1
	log.Printf("y: %v", y1)
	log.Printf("num length: %v", num)
// 2023/07/09 15:17:26 y: [1 2 3 4]
// 2023/07/09 15:17:26 num: 4
```
*copy å›å‚³ç‚ºè¤‡è£½å…ƒç´ çš„æ•¸é‡*

è¤‡è£½å¯ä»¥æœ‰ä»¥ä¸‹è®ŠåŒ–
```go
	x1 := []int{1, 2, 3, 4}
	y1 := make([]int, 2) // x1 æœ€å¤šå…©å€‹å…ƒç´ è¢«è¤‡è£½åˆ° y1
	num := copy(y1, x1)
```

```go
	x1 := []int{1, 2, 3, 4}
	y1 := make([]int, 2) // x1 æœ€å¤šå…©å€‹å…ƒç´ è¢«è¤‡è£½åˆ° y1
	copy(y1, x1[2:])
```

```go
	x1 := []int{1, 2, 3, 4}
	copy(x1[:3], x1[1:])
```

## å­—ä¸²èˆ‡ rune èˆ‡ byte

å¯ä»¥ä½¿ç”¨*ç´¢å¼•é‹ç®—å¼(index expression)* å¾å­—ä¸²ä¸­å–å€¼
```go
	var s string = "Hello String"
	var b byte = s[6]
```


*slice é‹ç®—å¼*å¯ç”¨æ–¼è™•ç†å­—ä¸²ã€‚ç”±æ–¼å­—ä¸²æ˜¯ä¸å¯è®Šçš„ï¼Œå› æ­¤æ²’æœ‰ slice å…±äº«è¨˜æ†¶é«”å•é¡Œã€‚ä½†æœ‰å…¶å®ƒå•é¡Œï¼Œå­—ä¸²ç”± byte çµ„æˆï¼Œä½†ä½¿ç”¨éè‹±æ–‡æˆ–è¡¨æƒ…ç¬¦è™Ÿï¼Œæœƒé‡åˆ°æ›´å¸¸ byte çš„ UTF-8 ç·¨ç¢¼ã€‚é€™æœƒåœ¨åšåˆ‡ç‰‡é‹ç®—å¼æ™‚å¯èƒ½å‡ºç¾éé æœŸè¡Œç‚ºã€‚

å°æ–¼å­—ä¸²é•·åº¦å¯ä»¥ä½¿ç”¨ `len` å‡½å¼ç²å–ã€‚*å°æ–¼å­—ä¸²ç´¢å¼•å’Œ slice é‹ç®—å¼éƒ½ç”¨ bytes ä¾†è¨ˆç®—ä½ç½®ï¼Œæ‰€ä»¥é•·åº¦æ˜¯ bytes é•·åº¦*ã€‚

`rune` æˆ– `byte` å¯ä»¥è½‰æ›æˆå­—ä¸²ã€‚

```go
		var a rune = 'x'
	s = string(a)
	var a1 rune = 'y'
	s2 = string(a1)
	log.Printf("s: %s", s)
	log.Printf("s2: %s", s2)

	s = "Hello, ğŸ¥±"
	var bs []byte = []byte(s)
	var rs []rune = []rune(s)
	log.Printf("bs: %v", bs)
	log.Printf("rs: %v", rs)

// 2023/07/09 20:39:43 s: x
// 2023/07/09 20:39:43 s2: y
// 2023/07/09 20:39:43 bs: [72 101 108 108 111 44 32 240 159 165 177]
// 2023/07/09 20:39:43 rs: [72 101 108 108 111 44 32 129393]	
```

## map
å®£å‘Š `string` é¡å‹ç´¢å¼•éµï¼Œ`int` é¡å‹çš„å€¼ï¼Œé è¨­å€¼ç‚º `nil`ï¼Œé•·åº¦ç‚º 0ã€‚
```go
var nilMap map[string]int
```

ä½¿ç”¨ `:=` å°‡ä¸€å€‹*map å¸¸å€¼*æŒ‡æ´¾çµ¦ map è®Šæ•¸ä¾†å®£å‘Š

```go
totalWins := map[string]int{}
```
